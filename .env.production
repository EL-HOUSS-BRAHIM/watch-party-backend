# Watch Party Backend Production Environment
# Cleaned on 2025-08-12: removed duplicates & obsolete placeholder block.
# NOTE: Do NOT commit real secrets to VCS. Prefer AWS Secrets Manager / SSM Parameter Store.

# -----------------------------------------------------------------------------
# Core Django
# -----------------------------------------------------------------------------
DEBUG=False
DJANGO_SETTINGS_MODULE=watchparty.settings.production
SECRET_KEY=your-very-secure-secret-key-here  # TODO: load from secret manager
ALLOWED_HOSTS=be-watch-party.brahim-elhouss.me,watch-party.brahim-elhouss.me,127.0.0.1,localhost,35.181.208.71
CSRF_TRUSTED_ORIGINS=https://be-watch-party.brahim-elhouss.me,https://watch-party.brahim-elhouss.me

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=https://watch-party.brahim-elhouss.me,https://be-watch-party.brahim-elhouss.me
CORS_ALLOW_CREDENTIALS=True

# -----------------------------------------------------------------------------
# Database (AWS RDS PostgreSQL) - Updated Infrastructure
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://postgres:YOUR_DB_PASSWORD@all-in-one.cj6w0queklir.eu-west-3.rds.amazonaws.com:5432/watchparty_prod?sslmode=require
DATABASE_NAME=watchparty_prod
DATABASE_USER=postgres
DATABASE_PASSWORD=YOUR_DB_PASSWORD  # TODO: Replace with actual password & move to secret manager
DATABASE_HOST=all-in-one.cj6w0queklir.eu-west-3.rds.amazonaws.com
DATABASE_PORT=5432
DB_SSL_MODE=require

# -----------------------------------------------------------------------------
# Redis / Valkey (ElastiCache) - Updated Infrastructure
# -----------------------------------------------------------------------------
REDIS_URL=redis://master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/0
REDIS_HOST=master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=  # Add password if authentication is enabled
REDIS_USE_SSL=False

# Redis Reader endpoint (for read operations)
REDIS_READER_URL=redis://replica.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/0

# Celery (Uses Redis/Valkey)
CELERY_BROKER_URL=redis://master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/1
CELERY_RESULT_BACKEND=redis://master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/2

# Django Channels Layer (Redis backend DB 3)
CHANNEL_LAYERS_CONFIG_HOSTS=redis://master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/3

# -----------------------------------------------------------------------------
# Email (Replace with production SMTP or SES if enabled)
# -----------------------------------------------------------------------------
EMAIL_HOST=localhost
EMAIL_PORT=25
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=noreply@brahim-elhouss.me

# -----------------------------------------------------------------------------
# AWS S3 (Optional)
# -----------------------------------------------------------------------------
USE_S3=False
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
AWS_S3_REGION_NAME=us-east-1

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
SECURE_SSL_REDIRECT=True
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# -----------------------------------------------------------------------------
# Static & Media Paths (Server filesystem locations)
# -----------------------------------------------------------------------------
MEDIA_URL=/media/
STATIC_URL=/static/
MEDIA_ROOT=/home/ubuntu/watch-party/back-end/media/
STATIC_ROOT=/home/ubuntu/watch-party/back-end/staticfiles/

# -----------------------------------------------------------------------------
# Monitoring & Environment
# -----------------------------------------------------------------------------
SENTRY_DSN=
ENVIRONMENT=production

# -----------------------------------------------------------------------------
# Rate Limiting / Analytics / Video Processing
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=True
ANALYTICS_RETENTION_DAYS=365
VIDEO_MAX_FILE_SIZE=5368709120
VIDEO_PROCESSING_TIMEOUT=1800

# -----------------------------------------------------------------------------
# WebSocket / Parties / ML
# -----------------------------------------------------------------------------
WS_MAX_CONNECTIONS_PER_IP=20
WS_HEARTBEAT_INTERVAL=30
MAX_PARTY_PARTICIPANTS=100
ML_PREDICTIONS_ENABLED=False

# -----------------------------------------------------------------------------
# Celery Worker Settings
# -----------------------------------------------------------------------------
CELERY_TASK_ALWAYS_EAGER=False
CELERY_TASK_EAGER_PROPAGATES=True
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# -----------------------------------------------------------------------------
# AWS Infrastructure IDs (Reference Only - non-secret)
# -----------------------------------------------------------------------------
VPC_ID=vpc-02329bf45f051fa03
RDS_SECURITY_GROUP_ID=sg-062535db0d4e19a63
ELASTICACHE_SECURITY_GROUP_ID=sg-04e656800ee20c48b
APPLICATION_SECURITY_GROUP_ID=sg-0761bedcf95617b85
