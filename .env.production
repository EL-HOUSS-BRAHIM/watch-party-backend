# Watch Party Backend Production Environment
# Cleaned on 2025-08-12: removed duplicates & obsolete placeholder block.
# NOTE: Do NOT commit real secrets to VCS. Prefer AWS Secrets Manager / SSM Parameter Store.

# -----------------------------------------------------------------------------
# Core Django
# -----------------------------------------------------------------------------
DEBUG=False
DJANGO_SETTINGS_MODULE=watchparty.settings.production
SECRET_KEY=your-very-secure-secret-key-here  # TODO: load from secret manager
ALLOWED_HOSTS=be-watch-party.brahim-elhouss.me,watch-party.brahim-elhouss.me,127.0.0.1,localhost,35.181.208.71
CSRF_TRUSTED_ORIGINS=https://be-watch-party.brahim-elhouss.me,https://watch-party.brahim-elhouss.me

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=https://watch-party.brahim-elhouss.me,https://be-watch-party.brahim-elhouss.me
CORS_ALLOW_CREDENTIALS=True

# -----------------------------------------------------------------------------
# Database (AWS RDS PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://watchparty_admin:VMHNTSd7MoJ7Kdt1Ud5SxmO8hCf2XY3c@watch-party-postgres.cj6w0queklir.eu-west-3.rds.amazonaws.com:5432/watchparty_prod?sslmode=require
DATABASE_NAME=watchparty_prod
DATABASE_USER=watchparty_admin
DATABASE_PASSWORD=VMHNTSd7MoJ7Kdt1Ud5SxmO8hCf2XY3c  # TODO: rotate & move to secret manager
DATABASE_HOST=watch-party-postgres.cj6w0queklir.eu-west-3.rds.amazonaws.com
DATABASE_PORT=5432
DB_SSL_MODE=require

# -----------------------------------------------------------------------------
# Redis / Valkey (ElastiCache)
# -----------------------------------------------------------------------------
REDIS_URL=rediss://:d0fdf6326d7f8f424decafa7495957a2a4465a4e280287f510c58c548d83de2ef0ff9098156f5baaa461aa51ceee196b@master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/0?ssl_cert_reqs=none
REDIS_HOST=master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=d0fdf6326d7f8f424decafa7495957a2a4465a4e280287f510c58c548d83de2ef0ff9098156f5baaa461aa51ceee196b  # TODO: rotate & move to secret manager
REDIS_USE_SSL=True

# Celery (Uses Redis/Valkey)
CELERY_BROKER_URL=rediss://:d0fdf6326d7f8f424decafa7495957a2a4465a4e280287f510c58c548d83de2ef0ff9098156f5baaa461aa51ceee196b@master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/2?ssl_cert_reqs=none
CELERY_RESULT_BACKEND=rediss://:d0fdf6326d7f8f424decafa7495957a2a4465a4e280287f510c58c548d83de2ef0ff9098156f5baaa461aa51ceee196b@master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/3?ssl_cert_reqs=none

# Django Channels Layer (Redis backend DB 4)
CHANNEL_LAYERS_CONFIG_HOSTS=rediss://:d0fdf6326d7f8f424decafa7495957a2a4465a4e280287f510c58c548d83de2ef0ff9098156f5baaa461aa51ceee196b@master.watch-party-valkey.2muo9f.euw3.cache.amazonaws.com:6379/4?ssl_cert_reqs=none

# -----------------------------------------------------------------------------
# Email (Replace with production SMTP or SES if enabled)
# -----------------------------------------------------------------------------
EMAIL_HOST=localhost
EMAIL_PORT=25
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=noreply@brahim-elhouss.me

# -----------------------------------------------------------------------------
# AWS S3 (Optional)
# -----------------------------------------------------------------------------
USE_S3=False
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
AWS_S3_REGION_NAME=us-east-1

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
SECURE_SSL_REDIRECT=True
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# -----------------------------------------------------------------------------
# Static & Media Paths (Server filesystem locations)
# -----------------------------------------------------------------------------
MEDIA_URL=/media/
STATIC_URL=/static/
MEDIA_ROOT=/home/ubuntu/watch-party/back-end/media/
STATIC_ROOT=/home/ubuntu/watch-party/back-end/staticfiles/

# -----------------------------------------------------------------------------
# Monitoring & Environment
# -----------------------------------------------------------------------------
SENTRY_DSN=
ENVIRONMENT=production

# -----------------------------------------------------------------------------
# Rate Limiting / Analytics / Video Processing
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=True
ANALYTICS_RETENTION_DAYS=365
VIDEO_MAX_FILE_SIZE=5368709120
VIDEO_PROCESSING_TIMEOUT=1800

# -----------------------------------------------------------------------------
# WebSocket / Parties / ML
# -----------------------------------------------------------------------------
WS_MAX_CONNECTIONS_PER_IP=20
WS_HEARTBEAT_INTERVAL=30
MAX_PARTY_PARTICIPANTS=100
ML_PREDICTIONS_ENABLED=False

# -----------------------------------------------------------------------------
# Celery Worker Settings
# -----------------------------------------------------------------------------
CELERY_TASK_ALWAYS_EAGER=False
CELERY_TASK_EAGER_PROPAGATES=True
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# -----------------------------------------------------------------------------
# AWS Infrastructure IDs (Reference Only - non-secret)
# -----------------------------------------------------------------------------
VPC_ID=vpc-02329bf45f051fa03
RDS_SECURITY_GROUP_ID=sg-062535db0d4e19a63
ELASTICACHE_SECURITY_GROUP_ID=sg-04e656800ee20c48b
APPLICATION_SECURITY_GROUP_ID=sg-0761bedcf95617b85
