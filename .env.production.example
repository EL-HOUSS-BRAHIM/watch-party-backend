# Production Environment Configuration for Watch Party Backend
# Copy this file to .env in your production server
# Updated for unified deployment system

# Django Settings
DEBUG=False
DJANGO_SETTINGS_MODULE=watchparty.settings.production
SECRET_KEY=your-very-secure-secret-key-here

# Domain Configuration (Updated paths for unified deployment)
ALLOWED_HOSTS=be-watch-party.brahim-elhouss.me,127.0.0.1,localhost
CSRF_TRUSTED_ORIGINS=https://be-watch-party.brahim-elhouss.me,https://watch-party.brahim-elhouss.me

# CORS Configuration (Updated for new frontend domain)
CORS_ALLOWED_ORIGINS=https://watch-party.brahim-elhouss.me,https://be-watch-party.brahim-elhouss.me
CORS_ALLOW_CREDENTIALS=True

# Database Configuration (Updated path for unified deployment)
DATABASE_URL=sqlite:///home/ubuntu/watch-party/back-end/db.sqlite3

# Redis Configuration (Isolated instance on port 6380)
REDIS_URL=redis://:watchparty_redis_2025@127.0.0.1:6380/0
CELERY_BROKER_URL=redis://:watchparty_redis_2025@127.0.0.1:6380/1
CELERY_RESULT_BACKEND=redis://:watchparty_redis_2025@127.0.0.1:6380/2
CHANNEL_LAYERS_CONFIG_HOSTS=redis://:watchparty_redis_2025@127.0.0.1:6380/3

# Email Configuration (Safe defaults - update with your SMTP settings)
EMAIL_HOST=localhost
EMAIL_PORT=25
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=noreply@brahim-elhouss.me

# AWS S3 Configuration (Disabled by default)
USE_S3=False
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
AWS_S3_REGION_NAME=us-east-1

# Security Settings (Updated for production)
SECURE_SSL_REDIRECT=True
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# Media and Static Files (Updated paths)
MEDIA_URL=/media/
STATIC_URL=/static/
MEDIA_ROOT=/home/ubuntu/watch-party/back-end/media/
STATIC_ROOT=/home/ubuntu/watch-party/back-end/staticfiles/

# Monitoring (Leave empty to disable Sentry)
SENTRY_DSN=
ENVIRONMENT=production

# Rate Limiting
RATE_LIMIT_ENABLED=True

# Analytics
ANALYTICS_RETENTION_DAYS=365

# Video Processing
VIDEO_MAX_FILE_SIZE=5368709120
VIDEO_PROCESSING_TIMEOUT=1800

# WebSocket Configuration
WS_MAX_CONNECTIONS_PER_IP=20
WS_HEARTBEAT_INTERVAL=30

# Party Configuration
MAX_PARTY_PARTICIPANTS=100

# Machine Learning
ML_PREDICTIONS_ENABLED=False

# Celery Configuration
CELERY_TASK_ALWAYS_EAGER=False
CELERY_TASK_EAGER_PROPAGATES=True
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
