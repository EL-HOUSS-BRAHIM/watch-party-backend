2025-08-11T11:23:46.9572763Z Current runner version: '2.327.1'
2025-08-11T11:23:46.9610586Z ##[group]Runner Image Provisioner
2025-08-11T11:23:46.9612815Z Hosted Compute Agent
2025-08-11T11:23:46.9614787Z Version: 20250711.363
2025-08-11T11:23:46.9616934Z Commit: 6785254374ce925a23743850c1cb91912ce5c14c
2025-08-11T11:23:46.9619238Z Build Date: 2025-07-11T20:04:25Z
2025-08-11T11:23:46.9621565Z ##[endgroup]
2025-08-11T11:23:46.9623585Z ##[group]Operating System
2025-08-11T11:23:46.9625596Z Ubuntu
2025-08-11T11:23:46.9627215Z 24.04.2
2025-08-11T11:23:46.9629144Z LTS
2025-08-11T11:23:46.9631223Z ##[endgroup]
2025-08-11T11:23:46.9633246Z ##[group]Runner Image
2025-08-11T11:23:46.9635388Z Image: ***-24.04
2025-08-11T11:23:46.9637339Z Version: 20250804.2.0
2025-08-11T11:23:46.9640630Z Included Software: https://github.com/actions/runner-images/blob/***24/20250804.2/images/***/Ubuntu2404-Readme.md
2025-08-11T11:23:46.9644510Z Image Release: https://github.com/actions/runner-images/releases/tag/***24%2F20250804.2
2025-08-11T11:23:46.9647537Z ##[endgroup]
2025-08-11T11:23:46.9651390Z ##[group]GITHUB_TOKEN Permissions
2025-08-11T11:23:46.9654859Z Contents: read
2025-08-11T11:23:46.9656723Z Metadata: read
2025-08-11T11:23:46.9658605Z Packages: read
2025-08-11T11:23:46.9660766Z ##[endgroup]
2025-08-11T11:23:46.9664986Z Secret source: Actions
2025-08-11T11:23:46.9667157Z Prepare workflow directory
2025-08-11T11:23:47.0246514Z Prepare all required actions
2025-08-11T11:23:47.0305053Z Getting action download info
2025-08-11T11:23:47.3134303Z ##[group]Download immutable action package 'actions/download-artifact@v4'
2025-08-11T11:23:47.3135974Z Version: 4.3.0
2025-08-11T11:23:47.3137640Z Digest: sha256:552a5b9ad918f62ec0c2e8f42f3c694d4ebd1b4036b18c39b14168fcdfc0e4f2
2025-08-11T11:23:47.3139827Z Source commit SHA: d3f86a106a0bac45b974a628896c90dbdf5c8093
2025-08-11T11:23:47.3141360Z ##[endgroup]
2025-08-11T11:23:47.6344935Z Complete job name: deploy
2025-08-11T11:23:47.6987461Z ##[group]Run actions/download-artifact@v4
2025-08-11T11:23:47.6988704Z with:
2025-08-11T11:23:47.6989495Z   name: deployment-package
2025-08-11T11:23:47.6990579Z   path: deployment-package/
2025-08-11T11:23:47.6991419Z   merge-multiple: false
2025-08-11T11:23:47.6992287Z   repository: EL-HOUSS-BRAHIM/watch-party-backend
2025-08-11T11:23:47.6993236Z   run-id: 16878604776
2025-08-11T11:23:47.6994294Z env:
2025-08-11T11:23:47.6995027Z   PYTHON_VERSION: 3.12
2025-08-11T11:23:47.6995803Z   NODE_VERSION: 18
2025-08-11T11:23:47.6996551Z ##[endgroup]
2025-08-11T11:23:47.9014016Z Downloading single artifact
2025-08-11T11:23:48.0021640Z Preparing to download the following artifacts:
2025-08-11T11:23:48.0023576Z - deployment-package (ID: 3733715757, Size: 580550, Expected Digest: sha256:401ce889f4bebdaf63d00205f65cd5127b5ec1016e99f87f4c0c7d7151455d3b)
2025-08-11T11:23:48.0667105Z Redirecting to blob download url: https://productionresultssa3.blob.core.windows.net/actions-results/b50b6dbb-c420-4da5-b16c-e0f285d97a32/workflow-job-run-312639c8-5866-5e40-aa3b-3d73940c6095/artifacts/257d990f96cb099583768fbdcb24475b5d89ef6c0d91add41e80a40e378d2784.zip
2025-08-11T11:23:48.0671708Z Starting download of artifact to: /home/runner/work/watch-party-backend/watch-party-backend/deployment-package
2025-08-11T11:23:48.1322495Z (node:2022) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
2025-08-11T11:23:48.1325094Z (Use `node --trace-deprecation ...` to show where the warning was created)
2025-08-11T11:23:48.2721371Z SHA256 digest of downloaded artifact is 401ce889f4bebdaf63d00205f65cd5127b5ec1016e99f87f4c0c7d7151455d3b
2025-08-11T11:23:48.2724371Z Artifact download completed successfully.
2025-08-11T11:23:48.2726435Z Total of 1 artifact(s) downloaded
2025-08-11T11:23:48.2728232Z Download artifact has finished successfully
2025-08-11T11:23:48.2944839Z ##[group]Run mkdir -p ~/.ssh
2025-08-11T11:23:48.2945955Z [36;1mmkdir -p ~/.ssh[0m
2025-08-11T11:23:48.2947094Z [36;1mecho "***[0m
2025-08-11T11:23:48.2948625Z [36;1m***[0m
2025-08-11T11:23:48.2949998Z [36;1m***[0m
2025-08-11T11:23:48.2951175Z [36;1m***[0m
2025-08-11T11:23:48.2952339Z [36;1m***[0m
2025-08-11T11:23:48.2953522Z [36;1m***[0m
2025-08-11T11:23:48.2954719Z [36;1m***[0m
2025-08-11T11:23:48.2955899Z [36;1m***[0m
2025-08-11T11:23:48.2957054Z [36;1m***[0m
2025-08-11T11:23:48.2958262Z [36;1m***[0m
2025-08-11T11:23:48.2959459Z [36;1m***[0m
2025-08-11T11:23:48.2960763Z [36;1m***[0m
2025-08-11T11:23:48.2961960Z [36;1m***[0m
2025-08-11T11:23:48.2963112Z [36;1m***[0m
2025-08-11T11:23:48.2964271Z [36;1m***[0m
2025-08-11T11:23:48.2965419Z [36;1m***[0m
2025-08-11T11:23:48.2966575Z [36;1m***[0m
2025-08-11T11:23:48.2967808Z [36;1m***[0m
2025-08-11T11:23:48.2968981Z [36;1m***[0m
2025-08-11T11:23:48.2970319Z [36;1m***[0m
2025-08-11T11:23:48.3035137Z [36;1m***[0m
2025-08-11T11:23:48.3037595Z [36;1m***[0m
2025-08-11T11:23:48.3040196Z [36;1m***[0m
2025-08-11T11:23:48.3042505Z [36;1m***[0m
2025-08-11T11:23:48.3044782Z [36;1m***[0m
2025-08-11T11:23:48.3046965Z [36;1m***[0m
2025-08-11T11:23:48.3049172Z [36;1m***[0m
2025-08-11T11:23:48.3051859Z [36;1m***[0m
2025-08-11T11:23:48.3053371Z [36;1m***[0m
2025-08-11T11:23:48.3054604Z [36;1m***[0m
2025-08-11T11:23:48.3055791Z [36;1m***[0m
2025-08-11T11:23:48.3056984Z [36;1m***[0m
2025-08-11T11:23:48.3058172Z [36;1m***[0m
2025-08-11T11:23:48.3059331Z [36;1m***[0m
2025-08-11T11:23:48.3060748Z [36;1m***[0m
2025-08-11T11:23:48.3061932Z [36;1m***[0m
2025-08-11T11:23:48.3063094Z [36;1m***[0m
2025-08-11T11:23:48.3064248Z [36;1m***[0m
2025-08-11T11:23:48.3065409Z [36;1m***[0m
2025-08-11T11:23:48.3066573Z [36;1m***[0m
2025-08-11T11:23:48.3067763Z [36;1m***[0m
2025-08-11T11:23:48.3068943Z [36;1m***[0m
2025-08-11T11:23:48.3070326Z [36;1m***[0m
2025-08-11T11:23:48.3071553Z [36;1m***[0m
2025-08-11T11:23:48.3072757Z [36;1m***[0m
2025-08-11T11:23:48.3073919Z [36;1m***[0m
2025-08-11T11:23:48.3075098Z [36;1m***[0m
2025-08-11T11:23:48.3076223Z [36;1m***[0m
2025-08-11T11:23:48.3077181Z [36;1m***" > ~/.ssh/id_rsa[0m
2025-08-11T11:23:48.3078101Z [36;1mchmod 600 ~/.ssh/id_rsa[0m
2025-08-11T11:23:48.3079145Z [36;1mssh-keyscan -H *** >> ~/.ssh/known_hosts[0m
2025-08-11T11:23:48.3163202Z shell: /usr/bin/bash -e {0}
2025-08-11T11:23:48.3164162Z env:
2025-08-11T11:23:48.3165000Z   PYTHON_VERSION: 3.12
2025-08-11T11:23:48.3165875Z   NODE_VERSION: 18
2025-08-11T11:23:48.3166717Z ##[endgroup]
2025-08-11T11:23:48.5776318Z # ***:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3***0.13
2025-08-11T11:23:48.6631280Z # ***:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3***0.13
2025-08-11T11:23:48.9823714Z # ***:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3***0.13
2025-08-11T11:23:49.2989222Z # ***:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3***0.13
2025-08-11T11:23:49.6113341Z # ***:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3***0.13
2025-08-11T11:23:49.7057082Z ##[group]Run # Create deployment script
2025-08-11T11:23:49.7057781Z [36;1m# Create deployment script[0m
2025-08-11T11:23:49.7058343Z [36;1mcat > deploy_to_server.sh << 'DEPLOY_SCRIPT'[0m
2025-08-11T11:23:49.7058925Z [36;1m#!/bin/bash[0m
2025-08-11T11:23:49.7059383Z [36;1mset -e[0m
2025-08-11T11:23:49.7059825Z [36;1m[0m
2025-08-11T11:23:49.7060589Z [36;1m# Configuration from environment variables[0m
2025-08-11T11:23:49.7061204Z [36;1mSERVER_HOST="***"[0m
2025-08-11T11:23:49.7061708Z [36;1mSERVER_USER="***"[0m
2025-08-11T11:23:49.7062244Z [36;1mPROJECT_DIR="/var/www/watch-party-backend"[0m
2025-08-11T11:23:49.7062888Z [36;1mDOMAIN="***"[0m
2025-08-11T11:23:49.7063345Z [36;1m[0m
2025-08-11T11:23:49.7063786Z [36;1m# Colors for output[0m
2025-08-11T11:23:49.7064272Z [36;1mGREEN='\033[0;32m'[0m
2025-08-11T11:23:49.7064759Z [36;1mYELLOW='\033[1;33m'[0m
2025-08-11T11:23:49.7065232Z [36;1mNC='\033[0m'[0m
2025-08-11T11:23:49.7065679Z [36;1m[0m
2025-08-11T11:23:49.7066142Z [36;1mlog() {[0m
2025-08-11T11:23:49.7066616Z [36;1m    echo -e "${GREEN}[DEPLOY] $1${NC}"[0m
2025-08-11T11:23:49.7067147Z [36;1m}[0m
2025-08-11T11:23:49.7067576Z [36;1m[0m
2025-08-11T11:23:49.7068247Z [36;1mwarn() {[0m
2025-08-11T11:23:49.7068745Z [36;1m    echo -e "${YELLOW}[DEPLOY] $1${NC}"[0m
2025-08-11T11:23:49.7069282Z [36;1m}[0m
2025-08-11T11:23:49.7069711Z [36;1m[0m
2025-08-11T11:23:49.7070400Z [36;1mlog "Starting deployment to $SERVER_HOST"[0m
2025-08-11T11:23:49.7070943Z [36;1m[0m
2025-08-11T11:23:49.7071398Z [36;1m# Check if this is first-time deployment[0m
2025-08-11T11:23:49.7071978Z [36;1mFIRST_DEPLOYMENT=false[0m
2025-08-11T11:23:49.7072603Z [36;1mif ssh $SERVER_USER@$SERVER_HOST "[ ! -d '$PROJECT_DIR' ]"; then[0m
2025-08-11T11:23:49.7073233Z [36;1m    FIRST_DEPLOYMENT=true[0m
2025-08-11T11:23:49.7073758Z [36;1m    log "First-time deployment detected"[0m
2025-08-11T11:23:49.7074289Z [36;1mfi[0m
2025-08-11T11:23:49.7074716Z [36;1m[0m
2025-08-11T11:23:49.7075224Z [36;1m# Create backup of current deployment (if exists)[0m
2025-08-11T11:23:49.7075824Z [36;1mif [ "$FIRST_DEPLOYMENT" = false ]; then[0m
2025-08-11T11:23:49.7076413Z [36;1m    log "Creating backup of current deployment"[0m
2025-08-11T11:23:49.7076983Z [36;1m    ssh $SERVER_USER@$SERVER_HOST "[0m
2025-08-11T11:23:49.7077585Z [36;1m        sudo mkdir -p /var/backups/watchparty/deployments[0m
2025-08-11T11:23:49.7078508Z [36;1m        sudo tar -czf /var/backups/watchparty/deployments/pre-deploy-\$(date +%Y%m%d_%H%M%S).tar.gz -C $PROJECT_DIR . 2>/dev/null || true[0m
2025-08-11T11:23:49.7079320Z [36;1m    "[0m
2025-08-11T11:23:49.7079764Z [36;1mfi[0m
2025-08-11T11:23:49.7080404Z [36;1m[0m
2025-08-11T11:23:49.7080840Z [36;1m# Upload deployment package[0m
2025-08-11T11:23:49.7081379Z [36;1mlog "Uploading deployment package"[0m
2025-08-11T11:23:49.7082086Z [36;1mscp -r deployment-package/* $SERVER_USER@$SERVER_HOST:/tmp/watchparty-deploy/[0m
2025-08-11T11:23:49.7082748Z [36;1m[0m
2025-08-11T11:23:49.7083201Z [36;1m# Execute deployment on server[0m
2025-08-11T11:23:49.7083793Z [36;1mssh $SERVER_USER@$SERVER_HOST << 'REMOTE_SCRIPT'[0m
2025-08-11T11:23:49.7084356Z [36;1m    set -e[0m
2025-08-11T11:23:49.7084816Z [36;1m    [0m
2025-08-11T11:23:49.7085287Z [36;1m    # Move to deployment directory[0m
2025-08-11T11:23:49.7085833Z [36;1m    cd /tmp/watchparty-deploy[0m
2025-08-11T11:23:49.7086341Z [36;1m    [0m
2025-08-11T11:23:49.7086823Z [36;1m    # Check if initial deployment is needed[0m
2025-08-11T11:23:49.7087414Z [36;1m    if [ ! -d "/var/www/watch-party-backend" ]; then[0m
2025-08-11T11:23:49.7088029Z [36;1m        echo "Running initial deployment setup..."[0m
2025-08-11T11:23:49.7088581Z [36;1m        [0m
2025-08-11T11:23:49.7089065Z [36;1m        # Make deploy script executable and run it[0m
2025-08-11T11:23:49.7089630Z [36;1m        chmod +x deploy.sh[0m
2025-08-11T11:23:49.7090457Z [36;1m        sudo DOMAIN="***" ./deploy.sh[0m
2025-08-11T11:23:49.7091177Z [36;1m        [0m
2025-08-11T11:23:49.7091622Z [36;1m    else[0m
2025-08-11T11:23:49.7092107Z [36;1m        echo "Updating existing deployment..."[0m
2025-08-11T11:23:49.7092649Z [36;1m        [0m
2025-08-11T11:23:49.7093169Z [36;1m        PROJECT_DIR="/var/www/watch-party-backend"[0m
2025-08-11T11:23:49.7093790Z [36;1m        PROJECT_USER="watchparty"[0m
2025-08-11T11:23:49.7094317Z [36;1m        [0m
2025-08-11T11:23:49.7094773Z [36;1m        # Stop services[0m
2025-08-11T11:23:49.7095283Z [36;1m        sudo supervisorctl stop all[0m
2025-08-11T11:23:49.7095803Z [36;1m        [0m
2025-08-11T11:23:49.7096273Z [36;1m        # Backup current virtual environment[0m
2025-08-11T11:23:49.7096936Z [36;1m        sudo -u $PROJECT_USER cp -r $PROJECT_DIR/venv $PROJECT_DIR/venv.backup[0m
2025-08-11T11:23:49.7097574Z [36;1m        [0m
2025-08-11T11:23:49.7098046Z [36;1m        # Update application code[0m
2025-08-11T11:23:49.7098831Z [36;1m        sudo rsync -av --exclude='venv*' --exclude='.env' --exclude='logs' --exclude='static' --exclude='media' \[0m
2025-08-11T11:23:49.7099577Z [36;1m            ./ $PROJECT_DIR/[0m
2025-08-11T11:23:49.7100327Z [36;1m        [0m
2025-08-11T11:23:49.7100964Z [36;1m        # Update Python dependencies[0m
2025-08-11T11:23:49.7101715Z [36;1m        sudo -u $PROJECT_USER $PROJECT_DIR/venv/bin/pip install -r $PROJECT_DIR/requirements.txt[0m
2025-08-11T11:23:49.7102426Z [36;1m        [0m
2025-08-11T11:23:49.7102906Z [36;1m        # Run Django management commands[0m
2025-08-11T11:23:49.7103454Z [36;1m        cd $PROJECT_DIR[0m
2025-08-11T11:23:49.7104238Z [36;1m        sudo -u $PROJECT_USER $PROJECT_DIR/venv/bin/python manage.py migrate --settings=watchparty.settings.production[0m
2025-08-11T11:23:49.7105362Z [36;1m        sudo -u $PROJECT_USER $PROJECT_DIR/venv/bin/python manage.py collectstatic --noinput --settings=watchparty.settings.production[0m
2025-08-11T11:23:49.7106222Z [36;1m        [0m
2025-08-11T11:23:49.7106704Z [36;1m        # Update supervisor configuration[0m
2025-08-11T11:23:49.7107276Z [36;1m        sudo supervisorctl reread[0m
2025-08-11T11:23:49.7107833Z [36;1m        sudo supervisorctl update[0m
2025-08-11T11:23:49.7108357Z [36;1m        [0m
2025-08-11T11:23:49.7108809Z [36;1m        # Start services[0m
2025-08-11T11:23:49.7109334Z [36;1m        sudo supervisorctl start all[0m
2025-08-11T11:23:49.7110008Z [36;1m        [0m
2025-08-11T11:23:49.7110471Z [36;1m        # Test deployment[0m
2025-08-11T11:23:49.7110970Z [36;1m        sleep 10[0m
2025-08-11T11:23:49.7111656Z [36;1m        if curl -f http://localhost:8000/health/ > /dev/null 2>&1; then[0m
2025-08-11T11:23:49.7112380Z [36;1m            echo "Deployment successful - health check passed"[0m
2025-08-11T11:23:49.7112992Z [36;1m            # Remove backup[0m
2025-08-11T11:23:49.7113545Z [36;1m            sudo rm -rf $PROJECT_DIR/venv.backup[0m
2025-08-11T11:23:49.7114105Z [36;1m        else[0m
2025-08-11T11:23:49.7114622Z [36;1m            echo "Deployment failed - rolling back"[0m
2025-08-11T11:23:49.7115226Z [36;1m            sudo supervisorctl stop all[0m
2025-08-11T11:23:49.7115823Z [36;1m            sudo -u $PROJECT_USER rm -rf $PROJECT_DIR/venv[0m
2025-08-11T11:23:49.7116536Z [36;1m            sudo -u $PROJECT_USER mv $PROJECT_DIR/venv.backup $PROJECT_DIR/venv[0m
2025-08-11T11:23:49.7117212Z [36;1m            sudo supervisorctl start all[0m
2025-08-11T11:23:49.7117751Z [36;1m            exit 1[0m
2025-08-11T11:23:49.7118226Z [36;1m        fi[0m
2025-08-11T11:23:49.7118673Z [36;1m    fi[0m
2025-08-11T11:23:49.7119106Z [36;1m    [0m
2025-08-11T11:23:49.7119544Z [36;1m    # Cleanup[0m
2025-08-11T11:23:49.7120210Z [36;1m    rm -rf /tmp/watchparty-deploy[0m
2025-08-11T11:23:49.7120743Z [36;1mREMOTE_SCRIPT[0m
2025-08-11T11:23:49.7121202Z [36;1m[0m
2025-08-11T11:23:49.7121682Z [36;1mlog "Deployment completed successfully"[0m
2025-08-11T11:23:49.7122222Z [36;1m[0m
2025-08-11T11:23:49.7122822Z [36;1m# Post-deployment verification[0m
2025-08-11T11:23:49.7123412Z [36;1mlog "Running post-deployment verification"[0m
2025-08-11T11:23:49.7123977Z [36;1mif [ -n "$DOMAIN" ]; then[0m
2025-08-11T11:23:49.7124532Z [36;1m    sleep 30  # Wait for services to fully start[0m
2025-08-11T11:23:49.7125190Z [36;1m    if curl -f "https://$DOMAIN/health/" > /dev/null 2>&1; then[0m
2025-08-11T11:23:49.7125862Z [36;1m        log "Health check passed for https://$DOMAIN"[0m
2025-08-11T11:23:49.7126435Z [36;1m    else[0m
2025-08-11T11:23:49.7127019Z [36;1m        warn "Health check failed for https://$DOMAIN - check server logs"[0m
2025-08-11T11:23:49.7127698Z [36;1m    fi[0m
2025-08-11T11:23:49.7128136Z [36;1mfi[0m
2025-08-11T11:23:49.7128568Z [36;1m[0m
2025-08-11T11:23:49.7129002Z [36;1mDEPLOY_SCRIPT[0m
2025-08-11T11:23:49.7129455Z [36;1m[0m
2025-08-11T11:23:49.7130062Z [36;1mchmod +x deploy_to_server.sh[0m
2025-08-11T11:23:49.7130594Z [36;1m./deploy_to_server.sh[0m
2025-08-11T11:23:49.7173336Z shell: /usr/bin/bash -e {0}
2025-08-11T11:23:49.7173832Z env:
2025-08-11T11:23:49.7174282Z   PYTHON_VERSION: 3.12
2025-08-11T11:23:49.7174752Z   NODE_VERSION: 18
2025-08-11T11:23:49.7175201Z ##[endgroup]
2025-08-11T11:23:49.7363755Z [0;32m[DEPLOY] Starting deployment to ***[0m
2025-08-11T11:23:51.9692918Z [0;32m[DEPLOY] First-time deployment detected[0m
2025-08-11T11:23:51.9693942Z [0;32m[DEPLOY] Uploading deployment package[0m
2025-08-11T11:25:46.0468137Z Pseudo-terminal will not be allocated because stdin is not a terminal.
2025-08-11T11:25:47.5880034Z Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 6.8.0-1033-aws x86_64)
2025-08-11T11:25:47.5880733Z 
2025-08-11T11:25:47.5881263Z  * Documentation:  https://help.***.com
2025-08-11T11:25:47.5882248Z  * Management:     https://landscape.canonical.com
2025-08-11T11:25:47.5883254Z  * Support:        https://***.com/pro
2025-08-11T11:25:47.5900433Z 
2025-08-11T11:25:47.5900861Z  System information as of Mon Aug 11 11:25:46 UTC 2025
2025-08-11T11:25:47.5901464Z 
2025-08-11T11:25:47.5901888Z   System load:  0.06               Processes:             119
2025-08-11T11:25:47.5902655Z   Usage of /:   29.2% of 28.89GB   Users logged in:       0
2025-08-11T11:25:47.5903230Z   Memory usage: 38%                IPv4 address for eth0: 10.0.1.62
2025-08-11T11:25:47.5903759Z   Swap usage:   15%
2025-08-11T11:25:47.5903961Z 
2025-08-11T11:25:47.5903972Z 
2025-08-11T11:25:47.5904227Z Expanded Security Maintenance for Applications is not enabled.
2025-08-11T11:25:47.5904575Z 
2025-08-11T11:25:47.5904761Z 0 updates can be applied immediately.
2025-08-11T11:25:47.5905014Z 
2025-08-11T11:25:47.5905248Z 2 additional security updates can be applied with ESM Apps.
2025-08-11T11:25:47.5905986Z Learn more about enabling ESM Apps service at https://***.com/esm
2025-08-11T11:25:47.5906356Z 
2025-08-11T11:25:47.5906545Z New release '24.04.3 LTS' available.
2025-08-11T11:25:47.5906990Z Run 'do-release-upgrade' to upgrade to it.
2025-08-11T11:25:47.5907276Z 
2025-08-11T11:25:47.5907280Z 
2025-08-11T11:25:47.6755177Z Running initial deployment setup...
2025-08-11T11:25:47.7261709Z [0;32m[2025-08-11 11:25:47] Starting Watch Party Backend deployment...[0m
2025-08-11T11:25:47.7272276Z [0;32m[2025-08-11 11:25:47] Updating system packages...[0m
2025-08-11T11:25:47.7339671Z 
2025-08-11T11:25:47.7341148Z WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2025-08-11T11:25:47.7341834Z 
2025-08-11T11:25:47.8583591Z Hit:1 http://eu-west-3.ec2.archive.***.com/*** jammy InRelease
2025-08-11T11:25:47.8588953Z Get:2 http://eu-west-3.ec2.archive.***.com/*** jammy-updates InRelease [128 kB]
2025-08-11T11:25:47.8662304Z Hit:3 http://eu-west-3.ec2.archive.***.com/*** jammy-backports InRelease
2025-08-11T11:25:47.9843165Z Hit:4 http://security.***.com/*** jammy-security InRelease
2025-08-11T11:25:48.6957697Z Fetched 128 kB in 1s (188 kB/s)
2025-08-11T11:25:50.6131088Z Reading package lists...
2025-08-11T11:25:50.8995907Z Building dependency tree...
2025-08-11T11:25:50.9002988Z Reading state information...
2025-08-11T11:25:50.9196117Z All packages are up to date.
2025-08-11T11:25:50.9313953Z 
2025-08-11T11:25:50.9869305Z WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2025-08-11T11:25:50.9870618Z Reading package lists...
2025-08-11T11:25:50.9870991Z 
2025-08-11T11:25:51.2791313Z Building dependency tree...
2025-08-11T11:25:51.2792272Z Reading state information...
2025-08-11T11:25:51.4075941Z Calculating upgrade...
2025-08-11T11:25:51.5596343Z The following packages were automatically installed and are no longer required:
2025-08-11T11:25:51.5607049Z   apache2-data apache2-utils
2025-08-11T11:25:51.5607576Z Use 'sudo apt autoremove' to remove them.
2025-08-11T11:25:51.6955120Z Get more security updates through Ubuntu Pro with 'esm-apps' enabled:
2025-08-11T11:25:51.6956055Z   redis-server redis-tools
2025-08-11T11:25:51.6969624Z Learn more about Ubuntu Pro on AWS at https://***.com/aws/pro
2025-08-11T11:25:51.7309569Z 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
2025-08-11T11:25:51.7551687Z [0;32m[2025-08-11 11:25:51] Installing system dependencies...[0m
2025-08-11T11:25:51.9014057Z [0;32m[2025-08-11 11:25:51] Installing packages: python3-venv postgresql postgresql-contrib libpq-dev[0m
2025-08-11T11:25:51.9052019Z 
2025-08-11T11:25:51.9054303Z WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2025-08-11T11:25:51.9054878Z 
2025-08-11T11:25:51.9581835Z Reading package lists...
2025-08-11T11:25:52.2183870Z Building dependency tree...
2025-08-11T11:25:52.2189551Z Reading state information...
2025-08-11T11:25:52.4464656Z The following packages were automatically installed and are no longer required:
2025-08-11T11:25:52.4481055Z   apache2-data apache2-utils
2025-08-11T11:25:52.4481546Z Use 'sudo apt autoremove' to remove them.
2025-08-11T11:25:52.4487133Z The following additional packages will be installed:
2025-08-11T11:25:52.4489729Z   libcommon-sense-perl libjson-perl libjson-xs-perl libllvm14 libpq5
2025-08-11T11:25:52.4493045Z   libsensors-config libsensors5 libssl-dev libtypes-serialiser-perl
2025-08-11T11:25:52.4493972Z   postgresql-14 postgresql-client-14 postgresql-client-common
2025-08-11T11:25:52.4494752Z   postgresql-common sysstat
2025-08-11T11:25:52.4501764Z Suggested packages:
2025-08-11T11:25:52.4502327Z   postgresql-doc-14 lm-sensors libssl-doc postgresql-doc isag
2025-08-11T11:25:53.4408298Z The following NEW packages will be installed:
2025-08-11T11:25:53.4419582Z   libcommon-sense-perl libjson-perl libjson-xs-perl libllvm14 libpq-dev libpq5
2025-08-11T11:25:53.4421369Z   libsensors-config libsensors5 libssl-dev libtypes-serialiser-perl postgresql
2025-08-11T11:25:53.4422322Z   postgresql-14 postgresql-client-14 postgresql-client-common
2025-08-11T11:25:53.4423079Z   postgresql-common postgresql-contrib python3-venv sysstat
2025-08-11T11:25:53.4811858Z 0 upgraded, 18 newly installed, 0 to remove and 0 not upgraded.
2025-08-11T11:25:53.5248500Z Need to get 45.0 MB of archives.
2025-08-11T11:25:53.5249295Z After this operation, 175 MB of additional disk space will be used.
2025-08-11T11:25:53.5250944Z Get:1 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 libcommon-sense-perl amd64 3.75-2build1 [21.1 kB]
2025-08-11T11:25:53.5294996Z Get:2 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 libjson-perl all 4.04000-1 [81.8 kB]
2025-08-11T11:25:53.5317083Z Get:3 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 libtypes-serialiser-perl all 1.01-1 [11.6 kB]
2025-08-11T11:25:53.5328667Z Get:4 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 libjson-xs-perl amd64 4.030-1build3 [87.2 kB]
2025-08-11T11:25:53.5353977Z Get:5 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 libllvm14 amd64 1:14.0.0-1***1.1 [24.0 MB]
2025-08-11T11:25:53.8181676Z Get:6 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 libpq5 amd64 14.18-0***0.22.04.1 [152 kB]
2025-08-11T11:25:53.8226798Z Get:7 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 libssl-dev amd64 3.0.2-0***1.19 [2376 kB]
2025-08-11T11:25:53.8463691Z Get:8 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 libpq-dev amd64 14.18-0***0.22.04.1 [148 kB]
2025-08-11T11:25:53.8485210Z Get:9 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 libsensors-config all 1:3.6.0-7***1 [5274 B]
2025-08-11T11:25:53.8496969Z Get:10 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 libsensors5 amd64 1:3.6.0-7***1 [26.3 kB]
2025-08-11T11:25:53.8510916Z Get:11 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 postgresql-client-common all 238 [29.6 kB]
2025-08-11T11:25:53.8512317Z Get:12 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 postgresql-client-14 amd64 14.18-0***0.22.04.1 [1246 kB]
2025-08-11T11:25:53.8647029Z Get:13 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 postgresql-common all 238 [169 kB]
2025-08-11T11:25:53.8669064Z Get:14 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 postgresql-14 amd64 14.18-0***0.22.04.1 [16.2 MB]
2025-08-11T11:25:54.0568607Z Get:15 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 postgresql all 14+238 [3288 B]
2025-08-11T11:25:54.0570432Z Get:16 http://eu-west-3.ec2.archive.***.com/*** jammy/main amd64 postgresql-contrib all 14+238 [3292 B]
2025-08-11T11:25:54.0574703Z Get:17 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/universe amd64 python3-venv amd64 3.10.6-1~22.04.1 [1042 B]
2025-08-11T11:25:54.0577709Z Get:18 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/main amd64 sysstat amd64 12.5.2-2***0.2 [487 kB]
2025-08-11T11:25:54.4689174Z debconf: unable to initialize frontend: Dialog
2025-08-11T11:25:54.4690636Z debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
2025-08-11T11:25:54.4691669Z debconf: falling back to frontend: Readline
2025-08-11T11:25:54.4804372Z debconf: unable to initialize frontend: Readline
2025-08-11T11:25:54.4804997Z debconf: (This frontend requires a controlling tty.)
2025-08-11T11:25:54.4805583Z debconf: falling back to frontend: Teletype
2025-08-11T11:25:54.4855593Z dpkg-preconfigure: unable to re-open stdin: 
2025-08-11T11:25:54.5219697Z Fetched 45.0 MB in 1s (81.7 MB/s)
2025-08-11T11:25:54.5698362Z Selecting previously unselected package libcommon-sense-perl:amd64.
2025-08-11T11:25:54.6269279Z (Reading database ... 
2025-08-11T11:25:54.6270189Z (Reading database ... 5%
2025-08-11T11:25:54.6270746Z (Reading database ... 10%
2025-08-11T11:25:54.6276865Z (Reading database ... 15%
2025-08-11T11:25:54.6277307Z (Reading database ... 20%
2025-08-11T11:25:54.6277726Z (Reading database ... 25%
2025-08-11T11:25:54.6278150Z (Reading database ... 30%
2025-08-11T11:25:54.6278543Z (Reading database ... 35%
2025-08-11T11:25:54.6278943Z (Reading database ... 40%
2025-08-11T11:25:54.6279343Z (Reading database ... 45%
2025-08-11T11:25:54.6279741Z (Reading database ... 50%
2025-08-11T11:25:54.6775318Z (Reading database ... 55%
2025-08-11T11:25:54.7477316Z (Reading database ... 60%
2025-08-11T11:25:54.8191303Z (Reading database ... 65%
2025-08-11T11:25:54.8867470Z (Reading database ... 70%
2025-08-11T11:25:54.9605054Z (Reading database ... 75%
2025-08-11T11:25:55.0526227Z (Reading database ... 80%
2025-08-11T11:25:55.1133464Z (Reading database ... 85%
2025-08-11T11:25:55.1865806Z (Reading database ... 90%
2025-08-11T11:25:55.2811711Z (Reading database ... 95%
2025-08-11T11:25:55.2812319Z (Reading database ... 100%
2025-08-11T11:25:55.2812993Z (Reading database ... 104909 files and directories currently installed.)
2025-08-11T11:25:55.2828346Z Preparing to unpack .../00-libcommon-sense-perl_3.75-2build1_amd64.deb ...
2025-08-11T11:25:55.2912048Z Unpacking libcommon-sense-perl:amd64 (3.75-2build1) ...
2025-08-11T11:25:55.3587681Z Selecting previously unselected package libjson-perl.
2025-08-11T11:25:55.3674325Z Preparing to unpack .../01-libjson-perl_4.04000-1_all.deb ...
2025-08-11T11:25:55.3743754Z Unpacking libjson-perl (4.04000-1) ...
2025-08-11T11:25:55.4281104Z Selecting previously unselected package libtypes-serialiser-perl.
2025-08-11T11:25:55.4364633Z Preparing to unpack .../02-libtypes-serialiser-perl_1.01-1_all.deb ...
2025-08-11T11:25:55.4431693Z Unpacking libtypes-serialiser-perl (1.01-1) ...
2025-08-11T11:25:55.4950943Z Selecting previously unselected package libjson-xs-perl.
2025-08-11T11:25:55.5027808Z Preparing to unpack .../03-libjson-xs-perl_4.030-1build3_amd64.deb ...
2025-08-11T11:25:55.5105817Z Unpacking libjson-xs-perl (4.030-1build3) ...
2025-08-11T11:25:55.5800645Z Selecting previously unselected package libllvm14:amd64.
2025-08-11T11:25:55.5873690Z Preparing to unpack .../04-libllvm14_1%3a14.0.0-1***1.1_amd64.deb ...
2025-08-11T11:25:55.6011607Z Unpacking libllvm14:amd64 (1:14.0.0-1***1.1) ...
2025-08-11T11:25:56.2361122Z Selecting previously unselected package libpq5:amd64.
2025-08-11T11:25:56.2422194Z Preparing to unpack .../05-libpq5_14.18-0***0.22.04.1_amd64.deb ...
2025-08-11T11:25:56.2449118Z Unpacking libpq5:amd64 (14.18-0***0.22.04.1) ...
2025-08-11T11:25:56.2720610Z Selecting previously unselected package libssl-dev:amd64.
2025-08-11T11:25:56.2817261Z Preparing to unpack .../06-libssl-dev_3.0.2-0***1.19_amd64.deb ...
2025-08-11T11:25:56.2855508Z Unpacking libssl-dev:amd64 (3.0.2-0***1.19) ...
2025-08-11T11:25:56.4260996Z Selecting previously unselected package libpq-dev.
2025-08-11T11:25:56.4351066Z Preparing to unpack .../07-libpq-dev_14.18-0***0.22.04.1_amd64.deb ...
2025-08-11T11:25:56.4422756Z Unpacking libpq-dev (14.18-0***0.22.04.1) ...
2025-08-11T11:25:56.5011297Z Selecting previously unselected package libsensors-config.
2025-08-11T11:25:56.5090783Z Preparing to unpack .../08-libsensors-config_1%3a3.6.0-7***1_all.deb ...
2025-08-11T11:25:56.5154349Z Unpacking libsensors-config (1:3.6.0-7***1) ...
2025-08-11T11:25:56.5779977Z Selecting previously unselected package libsensors5:amd64.
2025-08-11T11:25:56.5851066Z Preparing to unpack .../09-libsensors5_1%3a3.6.0-7***1_amd64.deb ...
2025-08-11T11:25:56.6890279Z Unpacking libsensors5:amd64 (1:3.6.0-7***1) ...
2025-08-11T11:25:56.7464659Z Selecting previously unselected package postgresql-client-common.
2025-08-11T11:25:56.7555876Z Preparing to unpack .../10-postgresql-client-common_238_all.deb ...
2025-08-11T11:25:56.7635465Z Unpacking postgresql-client-common (238) ...
2025-08-11T11:25:56.8261849Z Selecting previously unselected package postgresql-client-14.
2025-08-11T11:25:56.8350334Z Preparing to unpack .../11-postgresql-client-14_14.18-0***0.22.04.1_amd64.deb ...
2025-08-11T11:25:56.8405205Z Unpacking postgresql-client-14 (14.18-0***0.22.04.1) ...
2025-08-11T11:25:56.9691469Z Selecting previously unselected package postgresql-common.
2025-08-11T11:25:56.9768509Z Preparing to unpack .../12-postgresql-common_238_all.deb ...
2025-08-11T11:25:56.9939786Z Adding 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'
2025-08-11T11:25:57.0106364Z Unpacking postgresql-common (238) ...
2025-08-11T11:25:57.1241009Z Selecting previously unselected package postgresql-14.
2025-08-11T11:25:57.1329509Z Preparing to unpack .../13-postgresql-14_14.18-0***0.22.04.1_amd64.deb ...
2025-08-11T11:25:57.1399639Z Unpacking postgresql-14 (14.18-0***0.22.04.1) ...
2025-08-11T11:25:57.5890422Z Selecting previously unselected package postgresql.
2025-08-11T11:25:57.5976933Z Preparing to unpack .../14-postgresql_14+238_all.deb ...
2025-08-11T11:25:57.6041247Z Unpacking postgresql (14+238) ...
2025-08-11T11:25:57.6541938Z Selecting previously unselected package postgresql-contrib.
2025-08-11T11:25:57.6625771Z Preparing to unpack .../15-postgresql-contrib_14+238_all.deb ...
2025-08-11T11:25:57.6692978Z Unpacking postgresql-contrib (14+238) ...
2025-08-11T11:25:57.7171786Z Selecting previously unselected package python3-venv.
2025-08-11T11:25:57.7231418Z Preparing to unpack .../16-python3-venv_3.10.6-1~22.04.1_amd64.deb ...
2025-08-11T11:25:57.7297094Z Unpacking python3-venv (3.10.6-1~22.04.1) ...
2025-08-11T11:25:57.7921820Z Selecting previously unselected package sysstat.
2025-08-11T11:25:57.8016626Z Preparing to unpack .../17-sysstat_12.5.2-2***0.2_amd64.deb ...
2025-08-11T11:25:57.8154419Z Unpacking sysstat (12.5.2-2***0.2) ...
2025-08-11T11:25:57.9032189Z Setting up postgresql-client-common (238) ...
2025-08-11T11:25:57.9354569Z Setting up libsensors-config (1:3.6.0-7***1) ...
2025-08-11T11:25:57.9667453Z Setting up libpq5:amd64 (14.18-0***0.22.04.1) ...
2025-08-11T11:25:57.9843530Z Setting up libcommon-sense-perl:amd64 (3.75-2build1) ...
2025-08-11T11:25:58.0032665Z Setting up postgresql-client-14 (14.18-0***0.22.04.1) ...
2025-08-11T11:25:58.5601282Z update-alternatives: using /usr/share/postgresql/14/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode
2025-08-11T11:25:58.5900623Z Setting up python3-venv (3.10.6-1~22.04.1) ...
2025-08-11T11:25:58.6099285Z Setting up libssl-dev:amd64 (3.0.2-0***1.19) ...
2025-08-11T11:25:58.6278570Z Setting up libsensors5:amd64 (1:3.6.0-7***1) ...
2025-08-11T11:25:58.6452652Z Setting up libllvm14:amd64 (1:14.0.0-1***1.1) ...
2025-08-11T11:25:58.6613187Z Setting up libtypes-serialiser-perl (1.01-1) ...
2025-08-11T11:25:58.6791459Z Setting up libjson-perl (4.04000-1) ...
2025-08-11T11:25:58.6966321Z Setting up sysstat (12.5.2-2***0.2) ...
2025-08-11T11:25:58.8425496Z debconf: unable to initialize frontend: Dialog
2025-08-11T11:25:58.8427231Z debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
2025-08-11T11:25:58.8428342Z debconf: falling back to frontend: Readline
2025-08-11T11:25:58.9376917Z 
2025-08-11T11:25:58.9377448Z Creating config file /etc/default/sysstat with new version
2025-08-11T11:25:58.9940378Z update-alternatives: using /usr/bin/sar.sysstat to provide /usr/bin/sar (sar) in auto mode
2025-08-11T11:25:59.8040034Z Created symlink /etc/systemd/system/sysstat.service.wants/sysstat-collect.timer → /lib/systemd/system/sysstat-collect.timer.
2025-08-11T11:26:00.1910487Z Created symlink /etc/systemd/system/sysstat.service.wants/sysstat-summary.timer → /lib/systemd/system/sysstat-summary.timer.
2025-08-11T11:26:00.5662700Z Created symlink /etc/systemd/system/multi-user.target.wants/sysstat.service → /lib/systemd/system/sysstat.service.
2025-08-11T11:26:02.2644702Z Setting up libjson-xs-perl (4.030-1build3) ...
2025-08-11T11:26:02.2797116Z Setting up libpq-dev (14.18-0***0.22.04.1) ...
2025-08-11T11:26:02.2954058Z Setting up postgresql-common (238) ...
2025-08-11T11:26:02.4167145Z debconf: unable to initialize frontend: Dialog
2025-08-11T11:26:02.4168252Z debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
2025-08-11T11:26:02.4169265Z debconf: falling back to frontend: Readline
2025-08-11T11:26:02.7139180Z Adding user postgres to group ssl-cert
2025-08-11T11:26:02.8174388Z 
2025-08-11T11:26:02.8177922Z Creating config file /etc/postgresql-common/createcluster.conf with new version
2025-08-11T11:26:02.9423481Z Building PostgreSQL dictionaries from installed myspell/hunspell packages...
2025-08-11T11:26:02.9429395Z Removing obsolete dictionary files:
2025-08-11T11:26:03.6112363Z Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service → /lib/systemd/system/postgresql.service.
2025-08-11T11:26:03.9590459Z Setting up postgresql-14 (14.18-0***0.22.04.1) ...
2025-08-11T11:26:04.0699297Z debconf: unable to initialize frontend: Dialog
2025-08-11T11:26:04.0701269Z debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
2025-08-11T11:26:04.0704530Z debconf: falling back to frontend: Readline
2025-08-11T11:26:04.2333712Z Creating new PostgreSQL cluster 14/main ...
2025-08-11T11:26:04.2427425Z /usr/lib/postgresql/14/bin/initdb -D /var/lib/postgresql/14/main --auth-local peer --auth-host scram-sha-256 --no-instructions
2025-08-11T11:26:04.3114152Z The files belonging to this database system will be owned by user "postgres".
2025-08-11T11:26:04.3115024Z This user must also own the server process.
2025-08-11T11:26:04.3115434Z 
2025-08-11T11:26:04.3116191Z The database cluster will be initialized with locale "C.UTF-8".
2025-08-11T11:26:04.3117025Z The default database encoding has accordingly been set to "UTF8".
2025-08-11T11:26:04.3117834Z The default text search configuration will be set to "english".
2025-08-11T11:26:04.3118322Z 
2025-08-11T11:26:04.3118562Z Data page checksums are disabled.
2025-08-11T11:26:04.3118949Z 
2025-08-11T11:26:04.3119399Z fixing permissions on existing directory /var/lib/postgresql/14/main ... ok
2025-08-11T11:26:04.3120315Z creating subdirectories ... ok
2025-08-11T11:26:04.3120862Z selecting dynamic shared memory implementation ... posix
2025-08-11T11:26:04.3305661Z selecting default max_connections ... 100
2025-08-11T11:26:04.3523496Z selecting default shared_buffers ... 128MB
2025-08-11T11:26:04.3628039Z selecting default time zone ... Etc/UTC
2025-08-11T11:26:04.3640909Z creating configuration files ... ok
2025-08-11T11:26:04.4977395Z running bootstrap script ... ok
2025-08-11T11:26:05.0046767Z performing post-bootstrap initialization ... ok
2025-08-11T11:26:05.1303400Z syncing data to disk ... ok
2025-08-11T11:26:05.5471101Z update-alternatives: using /usr/share/postgresql/14/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode
2025-08-11T11:26:08.1907031Z Setting up postgresql-contrib (14+238) ...
2025-08-11T11:26:08.2094500Z Setting up postgresql (14+238) ...
2025-08-11T11:26:08.2301383Z Processing triggers for man-db (2.10.2-1) ...
2025-08-11T11:26:08.5851156Z Processing triggers for libc-bin (2.35-0***3.10) ...
2025-08-11T11:26:09.9913271Z 
2025-08-11T11:26:09.9913657Z Running kernel seems to be up-to-date.
2025-08-11T11:26:09.9916227Z 
2025-08-11T11:26:09.9916703Z No services need to be restarted.
2025-08-11T11:26:09.9917173Z 
2025-08-11T11:26:09.9917492Z No containers need to be restarted.
2025-08-11T11:26:09.9917831Z 
2025-08-11T11:26:09.9918061Z No user sessions are running outdated binaries.
2025-08-11T11:26:09.9918421Z 
2025-08-11T11:26:09.9918772Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2025-08-11T11:26:11.5629195Z [0;32m[2025-08-11 11:26:11] Installing Node.js...[0m
2025-08-11T11:26:11.6843820Z [38;5;79m2025-08-11 11:26:11 - Installing pre-requisites[0m
2025-08-11T11:26:11.8075701Z Hit:1 http://eu-west-3.ec2.archive.***.com/*** jammy InRelease
2025-08-11T11:26:11.8076856Z Hit:2 http://eu-west-3.ec2.archive.***.com/*** jammy-updates InRelease
2025-08-11T11:26:11.8077985Z Hit:3 http://eu-west-3.ec2.archive.***.com/*** jammy-backports InRelease
2025-08-11T11:26:11.9381257Z Hit:4 http://security.***.com/*** jammy-security InRelease
2025-08-11T11:26:14.8001298Z Reading package lists...
2025-08-11T11:26:14.8946476Z Reading package lists...
2025-08-11T11:26:15.1776432Z Building dependency tree...
2025-08-11T11:26:15.1795812Z Reading state information...
2025-08-11T11:26:15.3961452Z ca-certificates is already the newest version (20240203~22.04.1).
2025-08-11T11:26:15.3962311Z ca-certificates set to manually installed.
2025-08-11T11:26:15.3963339Z curl is already the newest version (7.81.0-1***1.20).
2025-08-11T11:26:15.3964540Z gnupg is already the newest version (2.2.27-3***2.4).
2025-08-11T11:26:15.3965242Z gnupg set to manually installed.
2025-08-11T11:26:15.3966067Z The following packages were automatically installed and are no longer required:
2025-08-11T11:26:15.3983856Z   apache2-data apache2-utils
2025-08-11T11:26:15.3989027Z Use 'sudo apt autoremove' to remove them.
2025-08-11T11:26:15.4572831Z The following NEW packages will be installed:
2025-08-11T11:26:15.4594859Z   apt-transport-https
2025-08-11T11:26:15.4899228Z 0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
2025-08-11T11:26:15.4900188Z Need to get 1510 B of archives.
2025-08-11T11:26:15.4900898Z After this operation, 170 kB of additional disk space will be used.
2025-08-11T11:26:15.4902193Z Get:1 http://eu-west-3.ec2.archive.***.com/*** jammy-updates/universe amd64 apt-transport-https all 2.4.14 [1510 B]
2025-08-11T11:26:15.8105174Z debconf: unable to initialize frontend: Dialog
2025-08-11T11:26:15.8106862Z debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
2025-08-11T11:26:15.8107996Z debconf: falling back to frontend: Readline
2025-08-11T11:26:15.8220157Z debconf: unable to initialize frontend: Readline
2025-08-11T11:26:15.8220988Z debconf: (This frontend requires a controlling tty.)
2025-08-11T11:26:15.8221717Z debconf: falling back to frontend: Teletype
2025-08-11T11:26:15.8260288Z dpkg-preconfigure: unable to re-open stdin: 
2025-08-11T11:26:15.8590836Z Fetched 1510 B in 0s (80.0 kB/s)
2025-08-11T11:26:15.8933374Z Selecting previously unselected package apt-transport-https.
2025-08-11T11:26:15.8947552Z (Reading database ... 
2025-08-11T11:26:15.8948145Z (Reading database ... 5%
2025-08-11T11:26:15.8948605Z (Reading database ... 10%
2025-08-11T11:26:15.8949047Z (Reading database ... 15%
2025-08-11T11:26:15.8977633Z (Reading database ... 20%
2025-08-11T11:26:15.8978248Z (Reading database ... 25%
2025-08-11T11:26:15.8978755Z (Reading database ... 30%
2025-08-11T11:26:15.8979738Z (Reading database ... 35%
2025-08-11T11:26:15.8980925Z (Reading database ... 40%
2025-08-11T11:26:15.8981833Z (Reading database ... 45%
2025-08-11T11:26:15.8982948Z (Reading database ... 50%
2025-08-11T11:26:15.9547060Z (Reading database ... 55%
2025-08-11T11:26:16.0273453Z (Reading database ... 60%
2025-08-11T11:26:16.0954780Z (Reading database ... 65%
2025-08-11T11:26:16.1657293Z (Reading database ... 70%
2025-08-11T11:26:16.2276485Z (Reading database ... 75%
2025-08-11T11:26:16.3238468Z (Reading database ... 80%
2025-08-11T11:26:16.3814009Z (Reading database ... 85%
2025-08-11T11:26:16.4502188Z (Reading database ... 90%
2025-08-11T11:26:16.5482223Z (Reading database ... 95%
2025-08-11T11:26:16.5483168Z (Reading database ... 100%
2025-08-11T11:26:16.5484265Z (Reading database ... 107040 files and directories currently installed.)
2025-08-11T11:26:16.5490695Z Preparing to unpack .../apt-transport-https_2.4.14_all.deb ...
2025-08-11T11:26:16.5505402Z Unpacking apt-transport-https (2.4.14) ...
2025-08-11T11:26:16.6252248Z Setting up apt-transport-https (2.4.14) ...
2025-08-11T11:26:17.3769770Z 
2025-08-11T11:26:17.3770399Z Running kernel seems to be up-to-date.
2025-08-11T11:26:17.3770851Z 
2025-08-11T11:26:17.3771126Z No services need to be restarted.
2025-08-11T11:26:17.3771498Z 
2025-08-11T11:26:17.3771767Z No containers need to be restarted.
2025-08-11T11:26:17.3772140Z 
2025-08-11T11:26:17.3772401Z No user sessions are running outdated binaries.
2025-08-11T11:26:17.3772816Z 
2025-08-11T11:26:17.3773197Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2025-08-11T11:26:18.9646764Z Hit:1 http://eu-west-3.ec2.archive.***.com/*** jammy InRelease
2025-08-11T11:26:18.9666827Z Hit:2 http://eu-west-3.ec2.archive.***.com/*** jammy-updates InRelease
2025-08-11T11:26:18.9668561Z Hit:3 http://eu-west-3.ec2.archive.***.com/*** jammy-backports InRelease
2025-08-11T11:26:19.0280643Z Get:4 https://deb.nodesource.com/node_18.x nodistro InRelease [12.1 kB]
2025-08-11T11:26:19.0970615Z Hit:5 http://security.***.com/*** jammy-security InRelease
2025-08-11T11:26:19.5458722Z Get:6 https://deb.nodesource.com/node_18.x nodistro/main amd64 Packages [11.6 kB]
2025-08-11T11:26:19.7558718Z Fetched 23.7 kB in 1s (32.4 kB/s)
2025-08-11T11:26:21.4496501Z Reading package lists...
2025-08-11T11:26:21.4780134Z [1;34m2025-08-11 11:26:21 - Repository configured successfully.[0m
2025-08-11T11:26:21.4781167Z [38;5;79m2025-08-11 11:26:21 - To install Node.js, run: apt-get install nodejs -y[0m
2025-08-11T11:26:21.4782165Z [38;5;79m2025-08-11 11:26:21 - You can use N|solid Runtime as a node.js alternative[0m
2025-08-11T11:26:21.4783166Z [1;32m2025-08-11 11:26:21 - To install N|solid Runtime, run: apt-get install nsolid -y 
2025-08-11T11:26:21.4783912Z [0m
2025-08-11T11:26:21.4834742Z 
2025-08-11T11:26:21.4835550Z WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2025-08-11T11:26:21.4836112Z 
2025-08-11T11:26:21.5320521Z Reading package lists...
2025-08-11T11:26:21.7962874Z Building dependency tree...
2025-08-11T11:26:21.7973341Z Reading state information...
2025-08-11T11:26:22.0171533Z The following packages were automatically installed and are no longer required:
2025-08-11T11:26:22.0177051Z   apache2-data apache2-utils
2025-08-11T11:26:22.0177716Z Use 'sudo apt autoremove' to remove them.
2025-08-11T11:26:22.1001059Z The following NEW packages will be installed:
2025-08-11T11:26:22.1006887Z   nodejs
2025-08-11T11:26:22.1392933Z 0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
2025-08-11T11:26:22.2607320Z Need to get 29.7 MB of archives.
2025-08-11T11:26:22.2608025Z After this operation, 187 MB of additional disk space will be used.
2025-08-11T11:26:22.2609041Z Get:1 https://deb.nodesource.com/node_18.x nodistro/main amd64 nodejs amd64 18.20.8-1nodesource1 [29.7 MB]
2025-08-11T11:26:23.6825150Z debconf: unable to initialize frontend: Dialog
2025-08-11T11:26:23.6826279Z debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
2025-08-11T11:26:23.6827297Z debconf: falling back to frontend: Readline
2025-08-11T11:26:23.6884614Z debconf: unable to initialize frontend: Readline
2025-08-11T11:26:23.6890069Z debconf: (This frontend requires a controlling tty.)
2025-08-11T11:26:23.6891098Z debconf: falling back to frontend: Teletype
2025-08-11T11:26:23.6921256Z dpkg-preconfigure: unable to re-open stdin: 
2025-08-11T11:26:23.7323864Z Fetched 29.7 MB in 1s (22.9 MB/s)
2025-08-11T11:26:23.7636726Z Selecting previously unselected package nodejs.
2025-08-11T11:26:23.7678863Z (Reading database ... 
2025-08-11T11:26:23.7679541Z (Reading database ... 5%
2025-08-11T11:26:23.7680320Z (Reading database ... 10%
2025-08-11T11:26:23.7680742Z (Reading database ... 15%
2025-08-11T11:26:23.7695032Z (Reading database ... 20%
2025-08-11T11:26:23.7695735Z (Reading database ... 25%
2025-08-11T11:26:23.7696189Z (Reading database ... 30%
2025-08-11T11:26:23.7696677Z (Reading database ... 35%
2025-08-11T11:26:23.7697141Z (Reading database ... 40%
2025-08-11T11:26:23.7697576Z (Reading database ... 45%
2025-08-11T11:26:23.7698015Z (Reading database ... 50%
2025-08-11T11:26:23.7698453Z (Reading database ... 55%
2025-08-11T11:26:23.7698897Z (Reading database ... 60%
2025-08-11T11:26:23.7754433Z (Reading database ... 65%
2025-08-11T11:26:23.7755192Z (Reading database ... 70%
2025-08-11T11:26:23.7755687Z (Reading database ... 75%
2025-08-11T11:26:23.7871971Z (Reading database ... 80%
2025-08-11T11:26:23.7890462Z (Reading database ... 85%
2025-08-11T11:26:23.7914839Z (Reading database ... 90%
2025-08-11T11:26:23.8107623Z (Reading database ... 95%
2025-08-11T11:26:23.8108227Z (Reading database ... 100%
2025-08-11T11:26:23.8212854Z (Reading database ... 107044 files and directories currently installed.)
2025-08-11T11:26:23.8213757Z Preparing to unpack .../nodejs_18.20.8-1nodesource1_amd64.deb ...
2025-08-11T11:26:23.8214497Z Unpacking nodejs (18.20.8-1nodesource1) ...
2025-08-11T11:26:27.6498188Z Setting up nodejs (18.20.8-1nodesource1) ...
2025-08-11T11:26:27.7190142Z Processing triggers for man-db (2.10.2-1) ...
2025-08-11T11:26:28.7047178Z 
2025-08-11T11:26:28.7048190Z Running kernel seems to be up-to-date.
2025-08-11T11:26:28.7049188Z 
2025-08-11T11:26:28.7050239Z No services need to be restarted.
2025-08-11T11:26:28.7050977Z 
2025-08-11T11:26:28.7051343Z No containers need to be restarted.
2025-08-11T11:26:28.7051895Z 
2025-08-11T11:26:28.7052214Z No user sessions are running outdated binaries.
2025-08-11T11:26:28.7052623Z 
2025-08-11T11:26:28.7053008Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2025-08-11T11:26:30.0744772Z [0;32m[2025-08-11 11:26:30] Creating project user...[0m
2025-08-11T11:26:30.1374825Z [0;32m[2025-08-11 11:26:30] User watchparty created[0m
2025-08-11T11:26:30.1420685Z [0;32m[2025-08-11 11:26:30] Setting up PostgreSQL...[0m
2025-08-11T11:26:30.1511919Z Synchronizing state of postgresql.service with SysV service script with /lib/systemd/systemd-sysv-install.
2025-08-11T11:26:30.1513415Z Executing: /lib/systemd/systemd-sysv-install enable postgresql
2025-08-11T11:26:31.0584188Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.1841980Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.5466684Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.6063721Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.6232433Z CREATE ROLE
2025-08-11T11:26:31.6713744Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.6750791Z ALTER ROLE
2025-08-11T11:26:31.7206231Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.7243352Z ALTER ROLE
2025-08-11T11:26:31.7705827Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.7768851Z ALTER ROLE
2025-08-11T11:26:31.8249211Z could not change directory to "/tmp/watchparty-deploy": Permission denied
2025-08-11T11:26:31.8312553Z GRANT
2025-08-11T11:26:31.8365608Z [0;32m[2025-08-11 11:26:31] PostgreSQL setup completed[0m
2025-08-11T11:26:31.8382730Z [0;32m[2025-08-11 11:26:31] Setting up Redis...[0m
2025-08-11T11:26:32.1156167Z Synchronizing state of redis-server.service with SysV service script with /lib/systemd/systemd-sysv-install.
2025-08-11T11:26:32.1157307Z Executing: /lib/systemd/systemd-sysv-install enable redis-server
2025-08-11T11:26:32.9079469Z [0;32m[2025-08-11 11:26:32] Redis setup completed[0m
2025-08-11T11:26:32.9099400Z [0;32m[2025-08-11 11:26:32] Setting up project directory...[0m
2025-08-11T11:26:32.9194663Z [0;31m[2025-08-11 11:26:32] ERROR: This script should be run from the project root directory[0m
2025-08-11T11:26:33.0059068Z ##[error]Process completed with exit code 1.
2025-08-11T11:26:33.0109617Z ##[group]Run if [ "failure" == "success" ]; then
2025-08-11T11:26:33.0110293Z [36;1mif [ "failure" == "success" ]; then[0m
2025-08-11T11:26:33.0110783Z [36;1m  echo "✅ Deployment completed successfully"[0m
2025-08-11T11:26:33.0111447Z [36;1m  echo "🚀 Application is now live at https://***"[0m
2025-08-11T11:26:33.0111928Z [36;1melse[0m
2025-08-11T11:26:33.0112315Z [36;1m  echo "❌ Deployment failed"[0m
2025-08-11T11:26:33.0112799Z [36;1m  echo "Check the deployment logs for more information"[0m
2025-08-11T11:26:33.0113270Z [36;1mfi[0m
2025-08-11T11:26:33.0153885Z shell: /usr/bin/bash -e {0}
2025-08-11T11:26:33.0154282Z env:
2025-08-11T11:26:33.0154621Z   PYTHON_VERSION: 3.12
2025-08-11T11:26:33.0154984Z   NODE_VERSION: 18
2025-08-11T11:26:33.0155335Z ##[endgroup]
2025-08-11T11:26:33.0212590Z ❌ Deployment failed
2025-08-11T11:26:33.0213246Z Check the deployment logs for more information
2025-08-11T11:26:33.0261860Z Cleaning up orphan processes